# ICW

初始化命令字，通过向8259A相应端口写入特定ICW来重新设置。

## 初始化过程
- 往20H（主片）或A0H（从片）写入ICW1。
- 往21H（主片）或A1H（从片）写入ICW2。
- 往21H（主片）或A1H（从片）写入ICW3。
- 往21H（主片）或A1H（从片）写入ICW4。

## ICW1
| 位 | 描述 |
|---|---|
| [7] | 0 | 
| [6] |  | 
| [5] |  | 
| [4] | 1 | 
| [3] | 1表示level triggered模式，0表示edge triggered模式 | 
| [2] | 1表示4字节中断向量，0表示8字节中断向量 | 
| [1] | 1表示单个8259，0表示级联8259 | 
| [0] | 1表示需要ICW4，0表示不需要ICW4 | 

## ICW2
| 位 | 描述 |
|---|---|
| [7] | 中断向量号高5位 |
| [6] |  |
| [5] |  |
| [4] |  |
| [3] |  |
| [2] | 0 |
| [1] |  | 
| [0] |  |

## 主ICW3
| 位 | 描述 |
|---|---|
| [7] | 1表示IR7级联从片，0表示无从片 |
| [6] | 1表示IR6级联从片，0表示无从片 |
| [5] | 1表示IR5级联从片，0表示无从片 |
| [4] | 1表示IR4级联从片，0表示无从片 |
| [3] | 1表示IR3级联从片，0表示无从片 |
| [2] | 1表示IR2级联从片，0表示无从片 |
| [1] | 1表示IR1级联从片，0表示无从片 |
| [0] | 1表示IR0级联从片，0表示无从片 |

## 从ICW3
| 位 | 描述 |
|---|---|
| [7] | 0 |
| [6] |  |
| [5] |  |
| [4] |  |
| [3] |  |
| [2] | 与从片相连的主片IR号 |
| [1] |  |
| [0] |  |

## ICW4
| 位 | 描述 |
|---|---|
| [7] | 0 |
| [6] |  |
| [5] |  |
| [4] | 1表示SFNM模式，0表示sequential模式 |
| [3] | 缓冲模式 |
| [2] |  |
| [1] | 1表示自动EOI，0表示正常EOI |
| [0] | 1表示80x86模式，0表示MCS80/85模式 |