# FAT12文件系统

标准软盘共2880个扇区：
- 扇区0：引导扇区
- 扇区1-扇区9：FAT1
- 扇区10-扇区18：FAT2
- 扇区19-扇区32：根目录区
- 扇区33-扇区2879：数据区

## 引导扇区
| 偏移（字节） | 长度（字节） | 描述 | 软盘采用值 |
|---|---|---|---|
| 0 | 3 | 初始跳转指令 |  | 
| 3 | 8 | 厂商名 |  | 
| 11 | 2 | 每扇区字节数 | 0x200 | 
| 13 | 1 | 每簇扇区数 | 0x1 | 
| 14 | 2 | 引导记录占用扇区数 | 0x1 | 
| 16 | 1 | FAT表数 | 0x2 | 
| 17 | 2 | 根目录文件数最大值 | 0xE0 | 
| 19 | 2 | 扇区总数16位表示 | 0xB40 | 
| 21 | 1 | 介质描述符 | 0xF0 | 
| 22 | 2 | 每FAT扇区数 | 0x9 | 
| 24 | 2 | 每磁道扇区数 | 0x12 | 
| 26 | 2 | 磁头数 | 0x2 | 
| 28 | 4 | 隐藏扇区数 | 
| 32 | 4 | 扇区总数32位表示（当16位表示为0时有效） | 0x0 | 
| 36 | 1 | 中断13驱动器号 | 0x0 | 
| 37 | 1 | 保留 | 0x0 | 
| 38 | 1 | 扩展引导标记29h | 0x29 | 
| 39 | 4 | 卷序列号	 |  | 
| 43 | 11 | 卷标 |  | 
| 54 | 8 | 文件系统类型	"FAT12"
| 62 | 448 | 引导指令部分 |  | 
| 510 | 2 | AA55h | 0xAA55

## FAT表
FAT2是FAT1的备份。

FAT表占9个扇区，每个FAT项占12位，由于0号和1号FAT项不用，共3070个FAT项（2-3071）。

连续3个字节Byte1、Byte2、Byte3产生2个FAT项：Byte2的低4位是第一项的高4位，Byte1是第一项的低8位；Byte3是第二项的高8位，Byte2的高4位是第二项的低4位。

##### FAT表项值
| 值 | 描述 |
|---|---|
| 0x000 | 未分配 |
| 0x001-0xFEF | 下一簇编号 |
| 0xFF0-0xFF6 | 保留簇 |
| 0xFF7 | 坏簇 |
| 0xFF8-0xFFF | 最后一个簇 |

## 根目录区

从第19扇区开始，每个目录条目占32字节，每扇区16个条目，最多有224个条目。

## 目录条目
| 偏移（字节） | 长度（字节） | 描述 | 
|---|---|---|
| 0 | 8 | 文件名<br/>若第一字节为0xE5，表示该目录条目为空（被删除）<br/>若第一字节为0x00，表示该目录条目及剩余目录条目均为空<br/>若第一字节为0x2E，表示该目录条目是一个子目录 |
| 8 | 3 | 扩展名 | 
| 11 | 1 | 属性 | 
| 12 | 2 | 保留 | 
| 14 | 2 | 创建时间 | 
| 16 | 2 | 创建日期 | 
| 18 | 2 | 上次访问日期 | 
| 20 | 2 | 保留 | 
| 22 | 2 | 上次修改时间 | 
| 24 | 2 | 上次修改日期 | 
| 26 | 2 | 起始簇号 | 
| 28 | 4 | 文件大小（字节） | 

##### 目录条目属性
| 位 | 描述 |
|---|---|
| [7] | 未使用 |
| [6] | 未使用 |
| [5] | 归档 |
| [4] | 子目录 |
| [3] | 卷标 |
| [2] | 系统 |
| [1] | 隐藏 |
| [0] | 只读 |

## 数据区
一簇占一扇区，簇号从2开始。