# UDP

User Datagram Protocol

用户数据报协议

UDP具有以下特点：

- 发送数据前不需要建立连接。
- 尽最大努力交付，不保证可靠交付。
- 面向报文，对上层交付的报文添加UDP首部后就交付给下层。
- 不进行拥塞控制。
- 接收方收到目的端口号不正确的UDP报文，就丢弃该报文，并由ICMP发送端口不可达差错报文给发送方。

## UDP数据报格式

UDP数据报封装在IP数据报的数据部分。

<table>
	<thead><tr>
		<th>字节</th>
		<th>2</th>
		<th>2</th>
		<th>2</th>
		<th>2</th>
		<th>可变</th>
	</tr></thead>
	<tr>
		<th>字段</th>
		<td>源端口</td>
		<td>目的端口</td>
		<td>长度</td>
		<td>检验和</td>
		<td>数据部分</td>
	</tr>
</table>
	
##### 源端口和目的端口	

发送的源端口号和目的端口号。

##### 长度	

UDP数据报长度（包括UDP首部和数据），单位为字节。最小值为8，即仅包括首部。

##### 检验和	

在数据报之前添加12字节的伪首部再计算校验和。

发送方如果没有进行校验和计算，则校验和设为0。如果校验和计算结果为0，则校验和的位设置为全1。

## UDP伪首部

<table>
	<tr>
		<th>字节</th>
		<th>4</th>
		<th>4</th>
		<th>1</th>
		<th>1</th>
		<th>2</th>
	</tr>
	<tr>
		<th>字段</th>
		<td>源IP地址</td>
		<td>目的IP地址</td>
		<td>0</td>
		<td>17</td>
		<td>UDP长度</td>
	</tr>
</table>