``` C
double pow(double a, int n)
{
    if (n < 0)
    {
        return 1.0 / pow(a, -n);
    }
    double res = 1.0;
    while (n)
    {
        if (n & 1) res *= a;
        a *= a;
        n >>= 1;
    }
    return res;
}
```