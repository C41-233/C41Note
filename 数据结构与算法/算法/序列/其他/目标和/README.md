# 目标和

## 滑动窗口法

##### 问题

给定一个整数数组，求数组中元素和为k的连续子数组。

例如：给定数组[0, 1, -1]和k=0，则子数组为[0]、[0, 1, -1]、[1, -1]。

##### 算法

利用滑动窗口，两个指针，一个指向当前子数组头，一个指向当前子数组尾，两层遍历，复杂度为O(n<sup>2</sup>)。

如果数组中的元素都为非负整数，则可以优化。若当前和已超过k时，尾指针可不再向后遍历。

## 前缀和法

##### 问题

给定一个整数数组，求数组中元素和为k的连续子数组个数。

例如：给定数组[0, 1, -1, 0]和k=0，则子数组数量为6。

##### 算法

令`p(i)`是数组0到i的元素之和，则元素之和为k的子数组[j, i]可以表示为`p(i)-p(j-1)=k`。则题目等价于求以i为末尾下标的子数组有多少个前缀和为`p(i)-k`。

定义一个map，key为已计算的每一个前缀和，value为该前缀和对应的出现次数。循环遍历数组，当前元素的前缀和p(i)-k的数量，即元素和为k的以当前元素为末尾的子数组数量，针对数组中的每个元素累加该数值即可。特别地，前缀和为0的子数组数量初始化为1，从而正确处理遍历的当前元素的前缀和恰好为k的情况。

该算法的复杂度为O(n)。