# INT 15H

系统中断。由AH指定服务编号。

## 88H
读取扩展内存大小。该方法兼容80286，最多获得16MB以内的物理内存数量。

#### 参数
- CF 0表示成功，1表示出错
- AX 扩展内存千字节数（KB）

## E8H
获取物理内存大小。

有两种模式，通过AL区分。

### AL = 20H

#### 参数
- EBX 后续值，这个值是为了得到下一块物理内存段，它应该指定上一次调用此程序所返回的值，如果这是第一次调用，EBX必须被指定为0。
- ES:DI 缓冲指针，指向一个地址范围描述符结构，BIOS将会填充此结构。


<table>
    <caption>地址描述符结构（16字节）</caption>
    <thead>
        <tr>
            <th>字节偏移</th>
            <th>描述</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>0:3</td>
            <td>低32位基址</td>
        </tr>
        <tr>
            <td>4:7</td>
            <td>高32位基址</td>
        </tr>
        <tr>
            <td>8:11</td>
            <td>低32位长度（字节）</td>
        </tr>
        <tr>
            <td>12:15</td>
            <td>高32位长度（字节）</td>
        </tr>
        <tr>
            <td>16</td>
            <td>
                地址类型
                <br/>1：可以被OS使用的RAM
                <br/>2：正在被使用，或者被系统保留，所以一定不要被OS使用
                <br/>其它：保留为未来使用，OS不可以使用
            </td>
        </tr>
    </tbody>
</table>

- ECX 缓冲大小，缓冲指针所指向的地址范围描述符结构的大小，以字节为单位，无论ES:DI所指向的结构如何设置，BIOS最多将会填充ECX个字节，必需被BIOS以及调用者所支持的最小尺寸是20个字节，未来的实现将会扩展此限制。
- EDX 标志，BIOS将会使用此标志，对调用者将要请求的系统映象信息进行校验，这些信息会被BIOS放置到ES:DI所指向的结构中。

#### 输出
- CF 0表示没有错误，否则存在错误
- EAX EDX设置的标志
- ECX BIOS所填充在地址范围描述符中的字节数量，被BIOS所返回的最小值是20个字节。
- EBX 为了等到下一个地址描述符所需要的后续值。

这个值依赖于具体的BIOS的实现，调用者不必要关心它的具体形式，只需要在下次迭代的时候，将其原封不动的放置到EBX中，就可以通过它获取下一个地址范围描述符。如果它的值为0，则表示它是最后一个地址范围描述符。

只有这个后续值为零，并且CF没有进位的时候，才表示这是最后一个地址范围描述符。

### AL = 01H
#### 输出
- CF 0表示没有错误，否则存在错误
- AX 扩展1，1到16M内存的容量，以KB为单位，最大数量0x3C00 = 15M
- BX 扩展2，16MB到4GB之间的内存容量，以64K为单位
- CX 配置1，1到16M内存的容量，以KB为单位，最大数量0x3C00 = 15M
- DX 配置2，16MB到4GB之间的内存容量，以64K为单位