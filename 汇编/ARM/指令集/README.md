# ARM指令集

ARM指令的通用格式为：

```
opcode{cond}{S} Rd, Rn {, operand2}
```

- opcode：指令
- cond：条件选项
- S：开启影响CPSR寄存器选项
- Rd：目标寄存器
- Rn：第一操作数寄存器
- oprand2：第二操作数

## 一、opcode

- [ADC 带进位加法](ADC.md)
- [ADD 加法](ADD.md)
- [ADR 小范围地址读取](ADR.md)
- [ADRL 中等范围地址读取](ADRL.md)
- [AND 按位与](AND.md)
- [B 跳转](B.md)
- [BIC 位清零](BIC.md)
- [BKPT 断点中断](BKPT.md)
- [BL 链接跳转](BL.md)
- [BLX 链接跳转并切换指令集](BLX.md)
- [BX 跳转并切换指令集](BX.md)
- [CDP 协处理器指令](CDP.md)
- [CLZ 前导零计数](CLZ.md)
- [CMN 负比较](CMN.md)
- [CMP 比较](CMP.md)
- [EOR 按位异或](EOR.md)
- [LDC 从存储器传送数据到协处理器](LDC.md)
- [LDM 从存储器向一组寄存器传送数据](LDM.md)
- [LDR 从存储器向寄存器传送数据](LDR.md)
- [MCR 从处理器寄存器传送数据到协处理器寄存器](MCR.md)
- [MLA 32位乘累加](MLA.md)
- [MOV 将操作数中的值拷贝到目标寄存器中](MOV.md)
- [MRC 从协处理器寄存器传送数据到处理器寄存器](MRC.md)
- [MRS 将状态寄存器的值拷贝到通用寄存器](MRS.md)
- [MSR 将通用寄存器的值拷贝到状态寄存器](MSR.md)
- [MUL 32位乘法](MUL.md)
- [MVN 将操作数按位取反的值拷贝到目标寄存器中](MVN.md)
- [NOP 空操作](NOP.md)
- [ORR 按位或](ORR.md)
- [RSB 反向减法](RSB.md)
- [RSC 带借位反向减法](RSC.md)
- [SBC 带借位减法](SBC.md)
- [SDC 从协处理器传送数据到存储器](SDC.md)
- [SMLAL 64位有符号乘累加](SMLAL.md)
- [SMULL 64位有符号乘法](SMULL.md)
- [STM 从一组寄存器向存储器存储数据](STM.md)
- [STR 从寄存器向存储器存储数据](STR.md)
- [SUB 	减法](SUB.md)
- [SWI 	产生SWI异常中断](SWI.md)
- [SWP 	数据交换](SWP.md)
- [TEQ 	测试相等](TEQ.md)
- [TST 	测试](TST.md)
- [UMLAL 64位无符号乘累加](UMLAL.md)
- [UMULL 64位无符号乘法](UMULL.md)

## 二、选项

### cond

条件选项，CPSR指定条件满足时才执行。默认情况下任何条件满足都执行。

| 助记符 | 含义 | 标志 |
|---|---|---|
| EQ | 相等 | Z=1 |
| NE | 不等 | Z=0 |
| CS | 高于或等于 | C=1 |
| HS | 高于或等于 | C=1 |
| CC | 低于 | C=0 |
| LO | 低于 | C=0 |
| MI | 符号负 | N=1 |
| PL | 符号正 | N=0 |
| VS | 溢出 | V=1 |
| VC | 未溢出 | V=0 |
| HI | 高于 | C=1且Z=0 |
| LS | 低于或等于 | C=0或Z=1 |
| GE | 大于或等于 | N=V |
| LT | 小于 | N!=V |
| GT | 大于 | N=V且Z=0 |
| LE | 小于或等于 | N!=V或Z=1 |
| AL | 无条件（默认） | 任何标志 |

### S

显式指定S，则指令影响CPSR寄存器，否则指令不影响CPSR寄存器。

## 三、操作数

### Rd

目标寄存器。

### Rn

第一操作数寄存器。

### operand2

第二操作数，有多种格式。

##### 立即数

格式：

```
#立即数
```

指令中的立即数占12位，由低8位指定的基数循环右移高4位指定的数*2次。

在汇编指令中可以直接写出移位产生的立即数，但只能写有效的立即数。

##### 寄存器

格式：

```
Rm {, <shift>, #立即数}
Rm {, <shift>, Rs}
```

Rm指出了第二操作数寄存器，shift指出移位类型，#立即数/Rs指出了移位次数。

shift包括：
- LSL：逻辑左移
- LSR：逻辑右移
- ASR：算术右移
- ROR：循环右移
- RRX：扩展循环右移1位，高位用C标志填充。格式：`Rm, RRX`

## 四、寻址方式

##### 寄存器寻址	

```
R
```

寄存器中的值直接参与运算。

##### 立即数寻址	

```
#十进制立即数
#&十六进制立即数	
```

立即数直接参与运算。

##### 寄存器移位寻址	

```
Rm {, <shift>, #立即数}
Rm {, <shift>, Rs}	
```

寄存器移位后参与运算。

##### 寄存器间接寻址	

```
[R]	
```

寄存器中存放地址，该地址指向的内存中的值参与运算。

##### 前索引变址寻址	

```
[Rb, #立即数]	
[Rb, Ro]	
```

寄存器Rb存放基址，由立即数或寄存器Ro给出偏移量，该地址指向的内存中的值参与运算。

##### 前索引自动变址寻址	

```
[Rb, #立即数]!	
[Rb, Ro]!	
```

寄存器Rb存放基址，由立即数或寄存器Ro给出偏移量，该地址指向的内存中的值参与运算。指令完成后修改基址寄存器的值为索引地址

##### 后索引自动变址寻址	

```
[Rb], #立即数
[Rb], Ro	
```

寄存器Rb存放地址，该地址指向的内存中的值参与运算。指令完成后修改寄存器的值为以立即数或寄存器Ro作为偏移量的索引地址

##### 相对寻址	

```
<label>
```	

把PC作为基址，偏移量用标号表示。